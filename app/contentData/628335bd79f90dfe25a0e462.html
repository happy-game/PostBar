<div class="markdown-text"><p>写node的最大感受就是，不断地用脚本在写路由，用了框架也是如此，本来这些属于服务器的任务，结果变成了脚本的任务，令人厌倦，实在烦了，难怪创始人都走了。
如果asp开源，独立出iis，支持跨平台、js新特性，吸收node，php，.net，Java，ruby等技术的优点，不断升级，成为一个轻量级的技术。那么，会果断把node给扔了，不再用这玩意。可惜了asp。
现在，把node的各种包，加上node本身，整个体积和php差不多，越来越臃肿。
如果node官方，能改改，把路由变成exe里的一部分，成为类似apache、tomcat的东西，接管路由，不再是现在一个路由文件负责。或者变成双模式，由config。xml，或config。json进行一下配置，可以延续原有的路由模式，或者象其他语言的一样，由服务器接管，那就好了。有个选择，总比没有要好太多。</p>
<p>设想：</p>
<p>1，设置根目录下的 config.json 或 server.json，发挥基础作用</p>
<p>2，后缀改变，。njs 取代 。js，直接废掉静态目录设定</p>
<p>由于要废掉静态目录设置，所以有必要区分 js
。njs 给 node 的，只能后端执行，动态文件
。js 是给前端的，只能前端执行，静态文件</p>
<p>njs 是默认后缀，也可以在前面的json配置中，改为任意名称</p>
<p>3，单入口模式终结，保留单入口模式，增加多入口模式，也就是 exe 接管路由
serve。json里设置采用什么模式
单入口模式，假设叫特殊模式，启动采用：node 入口
多入口模式，假设叫常规模式，由 node。exe 接管路由，有更大权力
启动时，直接根目录下：
node 或 node .
自动加载 。json 配置
抛弃以前的单入口路由模式。</p>
<p>常规模式下，所有的 。njs 都会被直接执行。</p>
<p>4，config.json 或 server.json，设置路径作用</p>
<p>在 json中可以设置访问路径
{
// 虚拟路径 》实际路径
虚拟路径：实际路径，
// 或者 虚拟路径 》虚拟路径 》实际路径
虚拟路径：{
		虚拟路径： 实际路径
	},
// 或者 虚拟路径 》实际路径 》实际路径
虚拟路径：{
		实际路径： 实际路径
	}
}
废掉 express 等框架</p>
<p>5，url的访问，默认是同名 njs
如：
http：//url/list
实际访问 list。njs</p>
<p>如果设置了虚拟路径，则 json配置的虚拟路径生效，更高优先级。</p>
<p>如果访问目录
http：//url/list/
默认访问 list/ 目录下的 index。njs</p>
<p>可以在前面的 json 配置文件设置影响所有目录的默认访问文件，也可以单独为不同目录设置不同的首个默认文件。
如果不设置，默认为 index。njs</p>
<p>6，node作为服务器的安全提升，无需第三方工具以防宕机</p>
<p>7，依然使用 js，而不用 ts</p>
<p>8，以上的设想，不是再用 js 写个新的框架，而是用 C和C++从底层彻底改变 node。exe</p>
</div>